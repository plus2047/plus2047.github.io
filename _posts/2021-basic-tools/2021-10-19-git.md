---
layout: mypost
title: Git Notes
categories: [basic-tools]
---

Git åŸºæœ¬å‘½ä»¤é€ŸæŸ¥è¡¨ã€‚

Git çš„æ ¸å¿ƒæ¦‚å¿µä¸º Branch. Branch æ˜¯ä¸€æ¡æ–‡ä»¶å†å²çº¿ï¼Œå¯ä»¥æäº¤ã€å›æ»šã€‚å¯ä»¥å¼€å¯ä¸åŒçš„ Branch, åœ¨å„ä¸ª Branch ä¸Šç‹¬ç«‹å¼€å‘ï¼Œç„¶åå¯ä»¥ä»æŸä¸ª Branch å¸æ”¶æ›´æ”¹åˆ°å½“å‰ Branch. è¿œç¨‹ç®¡ç†çš„åŸºæœ¬æ–¹å¼ä¹Ÿæ˜¯ Branch ä¹‹é—´ï¼ˆè€Œä¸æ˜¯æ•´ä¸ªä»£ç åº“ï¼‰çš„æ¨é€ã€‚

## Git åŸºæœ¬å‘½ä»¤

```sh
# åœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç›®å½•ä¸­åˆå§‹åŒ– git
git init
# æˆ–è€…ä»è¿œç¨‹ä»“åº“ clone
git clone <url>
# æŠŠ git å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ª ZIP æ–‡ä»¶
git archive -o latest.zip HEAD

# branch å†…çš„æ“ä½œã€‚æ–‡ä»¶æäº¤ã€å›æ»šã€‚ =====
# æ·»åŠ æ–‡ä»¶åˆ° git çš„ç›‘æ§ä¸­
git add --all
git add <filename>
git rm <filename>
# æäº¤æ›´æ”¹åˆ°å½“å‰åˆ†æ”¯ã€‚-a è¡¨ç¤ºæäº¤æ‰€æœ‰æ›´æ”¹ï¼Œ-m è¡¨ç¤ºé™„å¸¦æ¶ˆæ¯ï¼ˆå¦åˆ™ä¼šè‡ªåŠ¨å¼€ä¸€ä¸ªç¼–è¾‘å™¨å†™æ¶ˆæ¯ï¼‰
git commit -am "hello"
# è¿½åŠ  commit, è¿½åŠ å½“å‰å†…å®¹åˆ°æœ€åä¸€æ¬¡ commit ä¸Š
git commit â€“-amend
# åˆ é™¤æ‰€æœ‰ä¸åœ¨ .gitignore ä¸­çš„æ–‡ä»¶ï¼Œä¸€ç§æš´åŠ›ä½†å¯é æœ‰æ•ˆçš„æ–¹æ³•
git rm -r --cached .
git add .
# æŸ¥çœ‹æäº¤å†å² 
git log
# å¿«ç…§ä¹‹é—´çš„åˆ‡æ¢
# æŸ¥çœ‹å¿«ç…§å†å²
git log
# å›é€€åˆ°æŸä¸€ä¸ªç‰ˆæœ¬
git reset --hard HEAD
git reset --hard HEAD~100
# çŸ¥é“ commit-id æ—¶ï¼Œåˆ‡æ¢åˆ°æŸä¸ª commit
git reset --hard commit-id
# æ’¤é”€ add <?>
git reset <file>  # reset one file
git reset  # reset all file
# æŸ¥çœ‹æœ€è¿‘æäº¤çš„ commit-id
git reflag
# æ¢å¤æŸä¸ªæ–‡ä»¶åˆ°ä¸Šä¸€æ¬¡æäº¤çŠ¶æ€ï¼ˆä¸¢å¼ƒå½“å‰æ›´æ”¹ï¼‰ï¼š
get checkout filename

# branch (åˆ†æ”¯) æ“ä½œ =====
# åˆ›å»ºåˆ†æ”¯
git branch new_branch
# åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
git checkout new_branch
# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
git checkout -b new_branch
# åˆ‡æ¢åˆ°æŸè¿œç¨‹åˆ†æ”¯ï¼ˆæŠŠè¿œç¨‹åˆ†æ”¯æ˜ å°„åˆ°æœ¬åœ°ï¼‰
git checkout -b new_branch origin/new_branch
# git checkout master
git merge new_branch

# è¿œç¨‹æ“ä½œ
# ä» GUTHUB æ‹‰å– git ä»£ç åº“
git clone https://github.com/abc/def.git
# clone into special folder
git clone https://github.com/abc/def.git folder_name 
# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin <github-url>
# (--force å¼ºåˆ¶) å°†æœ¬åœ° master åˆ†æ”¯æ¨é€åˆ° origin master åˆ†æ”¯ï¼Œ -u è®¾ç½®æœ¬åœ°åˆ†æ”¯è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯ã€‚è¦æ±‚æœ‰é¡¹ç›®çš„å†™æƒé™ã€‚
git push -u --force origin master
# æäº¤æ›´æ”¹ã€‚æäº¤åˆ°å½“å‰åˆ†æ”¯è·Ÿè¸ªçš„è¿œç¨‹åˆ†æ”¯ã€‚å¯ä»¥ä½¿ç”¨ä¸Šä¸€æ¡å‘½ä»¤è®¾ç½®ã€‚clone çš„æƒ…å†µä¸‹ä¼šè‡ªåŠ¨è®¾ç½®è¿œç¨‹ä»“åº“ã€‚
git push
# æœ¬åœ° branch1 æ¨é€åˆ° origin:branch2 åˆ†æ”¯
git push origin branch1:branch2
# æ‹‰å–æ›´æ–°
git pull

# å…¨å±€è®¾ç½®è‡ªåŠ¨å­˜å‚¨ç”¨æˆ·åå’Œå¯†ç 
git config --global credential.helper store

# å¼ºåˆ¶å°†æœ¬åœ°ä»“åº“æ¨é€åˆ°è¿œç¨‹å¹¶è¦†ç›–è¿œç¨‹ä»“åº“ï¼Œç”¨äºå¼ºåˆ¶åˆå§‹åŒ– git ä»“åº“
git remote add origin <github-uri>
git push -u --force origin master
git push origin branch1:branch2

# å…³äºå­é¡¹ç›®
# æœ‰äº›é¡¹ç›®æœ‰é€’å½’é¡¹ç›®ï¼Œé€’å½’å…‹éš†å‘½ä»¤ï¼š
git clone --recursive <url>
# å¦‚æœ clone çš„æ—¶å€™å¿˜è®°é€’å½’äº†ï¼Œä¹‹åå†æ‹‰å–è‡ªé¡¹ç›®
git submodule update --init --recursive

# å…³äº stash
# æš‚å­˜å¿«ç…§å’Œåº”ç”¨å¿«ç…§ã€‚ç”¨äºï¼šå½“å‰ç›®å½•æœ‰æ›´æ”¹ï¼Œä½†æ˜¯è¦åˆ‡æ¢åˆ°æ–°çš„ branch
git stash save
git stash apply
git checkout stash -- .  # å¼ºåˆ¶ä½¿ç”¨ stash è¦†ç›–å½“å‰å·¥ä½œç›®å½•
# ä¸¤ä¸ªå¿«ç…§ä¹‹é—´å¯¹æ¯”ä¸ªåˆ«æ–‡ä»¶
git diff stash@{0}^1 stash@{0} -- <filename>
# å¿«ç…§ä¸å½“å‰å·¥ä½œç›®å½•ä¹‹é—´å¯¹æ¯”ä¸ªåˆ«æ–‡ä»¶
git diff stash@{0} -- <filename>
# æ¢å¤ä¸ªåˆ«æ–‡ä»¶
git checkout stash@{0} -- <filename>
```

## GITIGNORE

```txt
# éšè—æ ¹ç›®å½•å’Œä»»ä½•å­ç›®å½•ä¸‹çš„ bin åˆ†æ”¯:
bin/
# éšè—ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶
*.iml
```

ç™½åå•æ¨¡å¼ï¼ˆæ…ç”¨ï¼‰ï¼š

ç™½åå•æ¨¡å¼çš„é—®é¢˜æ˜¯ç™½åå•è¯­æ³•ä¸æ­£å¸¸è¯­æ³•ä¸å®Œå…¨ä¸€æ ·ã€‚å¦‚ `!*.cpp` åªèƒ½å°†æ ¹ç›®å½•ä¸‹çš„ `*.cpp` åŠ å…¥ç™½åå•ï¼Œè€Œä¸èƒ½å°†æ‰€æœ‰ç›®å½•ä¸‹çš„ `*.cpp` åŠ å…¥ç™½åå•ã€‚

```
*
!main.cpp
```


Update: å‰è¾ˆå‘Šè¯‰æˆ‘å¤§å®¶ä¸€èˆ¬éƒ½ç”¨ SourceTree GUI GIT å®¢æˆ·ç«¯ :( è¯¦æƒ…è¯·ç§»æ­¥ SourceTree æ•™ç¨‹ ğŸ˜‚


## é¡¹ç›®åŒæ—¶æ¨é€åˆ° Github å’Œ Coding

åœ¨ä½  Github å’Œ Coding ä¸¤ä¸ªé¡¹ç›®ä¸‹çš„ .git/config é‡Œï¼ŒåŠ ä¸Šï¼š[remote "all"]

      url = git@github.com:<username>/<repo>.git
      url = git@gitcafe.com:<username>/<repo>.git 

æ­¤æ—¶ git remote -v æ£€æŸ¥æ˜¯å¦å·²æœ‰ä¸€ä¸ªå« all çš„ remoteã€‚ ä»¥å git push all å³å¯æ¨é€åˆ°ä¸¤è€…ã€‚

## Git Bundle

git bundle is another command that may be used for backup purposes. It will create a single file containing all the refs you need to export from your local repository. It's often used for publishing commits via USB keys or other media in absence of a connection.

For one branch, it's simple. This command will create a myrepo.bundle file.

    git bundle create myrepo.bundle master

For more branches or tags, it's still simple:

    git bundle create myrepo.bundle master other_branch

Restoring the content of the bundle is a single comment. Inside an empty repo, type:

    git bundle unbundle myrepo.bundle

Instead if you do not have a repo, and just want to recreate the old one:

    git clone myrepo.bundle -b master myrepo_folder
